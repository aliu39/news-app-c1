(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n(1),c=n.n(s),o=n(7),r=n.n(o),i=(n(13),n(2)),l=n(3),h=n(5),u=n(4),b=n.p+"static/media/logo.103b5fa1.svg",d=(n(14),function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).toggleContent=function(){a.setState({showContent:!a.state.showContent})},a.saveArticle=function(){a.setState({cached:!0})},a.state={img_src:t.info.urlToImage,source:t.info.source.name,title:t.info.title,description:t.info.description,url:t.info.url,content:t.info.content,fullData:t.info,showContent:!1,cached:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("new article")}},{key:"componentWillUnmount",value:function(){console.log("destroying article")}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"article",onClick:this.toggleContent,children:[Object(a.jsx)("img",{src:null!=this.state.img_src?this.state.img_src:"https://www.sahilgraphics.com/wp-content/themes/shahil/assets/images/image-not-found.jpg"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:this.state.title+" "+this.state.source})," ",Object(a.jsx)("br",{}),this.state.description," ",Object(a.jsx)("br",{})]}),Object(a.jsx)("p",{children:this.state.showContent?this.state.content:null}),Object(a.jsxs)("p",{align:"right",children:[Object(a.jsx)("a",{href:this.state.url,target:"_blank",children:"original article"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("button",{className:"tab",onClick:this.saveArticle,children:"save"})]})]})}}]),n}(c.a.Component)),j=(c.a.Component,"https://newsapi.org/v2/top-headlines?country=us&category="),g=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).updateRefs=function(){},a.updateCache=function(){console.log("cache update");for(var t=[],e=new Set,n=0;n<a.state.refs.length;n++){var s=a.state.refs[n].current;s.state.cached&&(t.push(s.state.fullData),e.add(s.state.url))}for(var c=0;c<a.state.cache.length;c++){var o=a.state.cache[c];e.has(o.url)?console.log("deleted old save entry"):t.push(o)}return t},a.toggleTab=function(){var t=a.state.tab?a.state.cache:a.updateCache();a.setState({articles:t,tab:!a.state.tab,cache:a.state.articles})},a.state={articles:[],refs:[],tab:0,cache:[],cachedRefs:[],lastCategory:""},a}return Object(l.a)(n,[{key:"getNews",value:function(t){var e=this,n=new Headers;n.append("Accept","application/json"),console.log(j);var a=new Request("https://cors-anywhere.herokuapp.com/"+j+t+"&apiKey=f6d3a364faf54888a77e0bab46b8b66c",{method:"GET",headers:n,mode:"cors"});fetch(a).then((function(t){if(t.ok)return t.json();throw new Error("faulty request response")})).then((function(n){e.state.tab&&e.toggleTab(),t!==e.state.lastCategory&&e.updateCache();for(var a=[],s=[],o=0;o<n.articles.length;o++)a.push(n.articles[o]),s.push(c.a.createRef());console.log("setting lastCategory to "+t),e.setState({articles:a,refs:s,lastCategory:t})})).catch((function(t){console.log("ERROR: ",t.message)}))}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{align:"center",children:[Object(a.jsx)("button",{className:"search",onClick:function(){return t.getNews("entertainment")},children:"Entertainment"}),Object(a.jsx)("button",{className:"search",onClick:function(){return t.getNews("sports")},children:"Sports"}),Object(a.jsx)("button",{className:"search",onClick:function(){return t.getNews("technology")},children:"Technology"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{align:"right",children:Object(a.jsx)("button",{className:"tab",onClick:this.toggleTab,children:this.state.tab?"Return to search":"Saved articles"})}),Object(a.jsx)("div",{className:"scrollable",children:Object(a.jsx)("ul",{children:this.state.articles.map((function(e,n){return Object(a.jsx)(d,{info:e,tab:t.state.tab,ref:t.state.refs[n]},e.url)}))})})]})}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.b70242dc.chunk.js.map